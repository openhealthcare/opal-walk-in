{% extends 'modal_base.html' %}
{% block icon %}<i class="fa fa-list-ol"></i>{% endblock %}
{% block modal_body %}
  <form name="managementForm" class="form-horizontal">
    <div class="form-group">
      <label class="control-label col-sm-3">Follow-up</label>
      <div class="col-sm-8">
        <select class="form-control" ng-model="editing.follow_up">
          <option value="">---------</option>
          <option ng-repeat="follow_up in management_follow_up_list">[[follow_up]]</option>
        </select>
      </div>
    </div>
    <div ng-show="editing.follow_up == 'Discharged from clinic: Follow-Up in clinic'">
      <div class="form-group">
        <label class="control-label col-sm-3">Follow-up clinic</label>
        <div class="col-sm-8">
          <input class="form-control" type="text"
                 ng-model="editing.follow_up_clinic"
                 ng-options="f for f in management_clinics_list"
                 bs-typeahead >
        </div>
      </div>
      <div class="form-group">
        <label class="control-label col-sm-3">Date of appointment</label>
        <div class="col-sm-8">
          <input class="form-control" type="text"
                 name="date_of_appointment"
           ng-model="editing.date_of_appointment"
           ng-pattern="/^(0?[1-9]|[12][0-9]|3[01])\/(0?[1-9]|1[012])\/(\d{4})$/"
           placeholder="dd/mm/yyyy" />
                 <span class="help-block" ng-show="managementForm.date_of_appointment.$invalid">
                   Date must be dd/mm/yyyy
                 </span>

        </div>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-3">Advice</label>
      <div class="col-sm-8">
        <input class="form-control" type="text" ng-model="editing.advice">
      </div>
    </div>
  </form>
{% endblock %}
{% block modal_save %}
  <button class="btn btn-primary" ng-disabled="managementForm.date_of_appointment.$invalid" ng-click="save('save')">
    <i class="fa fa-save"></i>
    Save
  </button>
{% endblock %}
